# 查询代理网关

> type: service module

用户的每次连续查询都会启动一个对应的查询代理网关，保持websocket链接
本地会建立一个dns缓存，缓存对应区域的index actor id

## 分布式查询

使用h3查询经过的区域并向对应的索引分区发出查询请求，拿到所有的轨迹id

## 计算

根据设定好的batch size分割id列表并向计算模块提交对应的轨迹计算请求
将最后收集到的结果进行排序后返回
